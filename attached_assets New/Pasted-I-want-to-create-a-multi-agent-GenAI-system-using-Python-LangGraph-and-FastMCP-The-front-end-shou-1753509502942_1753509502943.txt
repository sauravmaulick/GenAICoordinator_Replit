I want to create a multi-agent GenAI system using Python, LangGraph, and FastMCP. The front end should be built using Streamlit. I will use Google Gemini as the LLM (not OpenAI). The core use case is as follows:

---

## ğŸ§¾ USER QUERY:

"Please provide how many open CAPA present in last one year. Also, provide how many investigation were created for brand Avino and provide brand Avinoâ€™s Clinical Trial summary."

---

## ğŸ” AGENT-to-AGENT FLOW (with CoT + FastMCP + Human-in-the-Loop)

### Step 1: Chain-of-Thought (CoT) Breakdown by Gemini Orchestrator Agent

Gemini LLM breaks the user prompt into 3 sub-questions:

- **Q1**: "How many open CAPA are present in the last one year?"
- **Q2**: "Fetch Investigation details, based on CAPA number which I got from Q1 and for brand 'Avino' from Neo4j. Include CAPA ID, Investigation Name, Brand, Batch Number, PDF Link"
- **Q3**: "Using PDF link(s) from Neo4j, go to AstraDB vector DB, retrieve embedding-based summary of clinical trial content for 'Avino'"

---

### Step 2: Agent Execution using FastMCP Architecture
Each sub-question is handled by an MCP module:

- **MCP1** â†’ Text File Reader Agent â†’ Parses `capa_data.txt`, filters open CAPAs by date.
- **MCP2** â†’ Neo4j Agent â†’ Connects to Neo4j, fetches investigation details using Cypher queries.
- **MCP3** â†’ Vector Search Agent â†’ Uses Astra DB, fetches relevant embedded PDF summaries using Milvus or Astra embedding vector DB.
- All responses go back to the Orchestrator Agent.

---

### Step 3: Email Action with Human-in-the-Loop
Once Q1â€“Q3 results are consolidated, the summary is shown to the user.

If the user agrees to send a mail:

- **MCP4** â†’ Mail Agent â†’ Uses SMTP or Gmail API to send the consolidated summary.

---

## ğŸ’¾ Input Data Requirements

- `capa_data.txt` â†’ Contains CAPA info: CAPA_ID, Title, Region, Status, Date, etc.
- `neo4j` â†’ Preloaded graph with nodes: Investigation, CAPA, PDF link (Cypher accessible).
- `astra DB / Milvus` â†’ Contains pre-embedded PDFs (Clinical Trials), searchable by brand name like "Avino".

---

## ğŸ” LLM and Tools Configuration

- LLM: **Gemini API** key required (`google.generativeai`)
- DB: PostgreSQL / Neo4j / Astra Vector DB
- Embedding: Gemini Text Embeddings or Sentence Transformers (if needed)
- Email: SMTP or SendGrid API

---

## ğŸ“‚ Project Structure

```bash
agent2agent_app/
â”œâ”€â”€ streamlit_app.py           # UI to enter query and show result
â”œâ”€â”€ run_langgraph.py           # Main entry point for LangGraph execution
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ orchestrator.py        # Gemini CoT logic
â”‚   â”œâ”€â”€ capa_agent.py          # Reads text CAPA file
â”‚   â”œâ”€â”€ neo4j_agent.py         # Connects to Neo4j for investigations
â”‚   â”œâ”€â”€ vector_agent.py        # Astra DB vector search & summarization
â”‚   â””â”€â”€ email_agent.py         # Sends mail after confirmation
â”œâ”€â”€ mcp_modules/
â”‚   â”œâ”€â”€ mcp_capa.py
â”‚   â”œâ”€â”€ mcp_neo4j.py
â”‚   â”œâ”€â”€ mcp_vector.py
â”‚   â””â”€â”€ mcp_email.py
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ capa_data.txt
â”‚   â””â”€â”€ pdfs/
â”œâ”€â”€ models/
â”‚   â””â”€â”€ embeddings/
â”œâ”€â”€ requirements.txt
â””â”€â”€ .env                       # Stores GEMINI_API_KEY, DB credentials

âœ… Goals
Use Gemini + LangGraph for CoT-based breakdown.
Each question routed via MCP (FastMCP style).
Store & parse data from file, Neo4j, and vector DB.
Generate final response and get human approval before sending email.

Please generate all required files, sample data, and Streamlit frontend so I can copy and run it quickly.